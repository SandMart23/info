<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Happy Birthday Lya ğŸ‚</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Poppins:wght@300;400;600&display=swap');

  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    font-family: 'Poppins', sans-serif;
    background: #0a0015;
    overflow-x: hidden;
    min-height: 100vh;
  }

  /* ===== INTRO SCREEN ===== */
  #intro {
    position: fixed; inset: 0;
    background: linear-gradient(135deg, #1a0030, #0d0020);
    display: flex; flex-direction: column;
    justify-content: center; align-items: center;
    z-index: 1000;
    transition: opacity 1s ease, transform 1s ease;
  }
  #intro.hide { opacity: 0; pointer-events: none; transform: scale(1.05); }

  .intro-emoji { font-size: 5em; animation: bounce 1.5s infinite; margin-bottom: 20px; }
  @keyframes bounce { 0%,100%{transform:translateY(0)} 50%{transform:translateY(-20px)} }

  #intro h1 {
    font-family: 'Dancing Script', cursive;
    font-size: clamp(2em, 6vw, 4em);
    color: #fff;
    text-align: center;
    margin-bottom: 10px;
  }
  #intro p { color: rgba(255,255,255,0.6); margin-bottom: 40px; font-size: 0.95em; }

  .start-btn {
    background: linear-gradient(135deg, #ff6fd8, #7b2ff7);
    color: white; border: none;
    padding: 18px 50px; border-radius: 50px;
    font-size: 1.1em; font-weight: 600;
    cursor: pointer; letter-spacing: 1px;
    box-shadow: 0 0 30px rgba(255, 111, 216, 0.5);
    animation: pulse-btn 2s infinite;
    transition: transform 0.2s;
  }
  .start-btn:hover { transform: scale(1.05); }
  @keyframes pulse-btn { 0%,100%{box-shadow:0 0 30px rgba(255,111,216,0.5)} 50%{box-shadow:0 0 60px rgba(255,111,216,0.9)} }

  /* ===== MAIN ===== */
  #main {
    display: none;
    min-height: 100vh;
    position: relative;
  }

  /* ===== STARFIELD ===== */
  #stars { position: fixed; inset: 0; z-index: 0; pointer-events: none; }

  /* ===== CANVAS PARTICLES ===== */
  #particleCanvas {
    position: fixed; inset: 0; z-index: 1; pointer-events: none;
  }

  /* ===== CONTENT ===== */
  .content {
    position: relative; z-index: 10;
    display: flex; flex-direction: column;
    align-items: center;
    padding: 60px 20px 100px;
  }

  /* ===== HEADER ===== */
  .header-glow {
    text-align: center;
    animation: fadeInDown 1.2s ease both;
  }
  @keyframes fadeInDown {
    from { opacity:0; transform:translateY(-40px); }
    to   { opacity:1; transform:translateY(0); }
  }

  .happy-text {
    font-family: 'Dancing Script', cursive;
    font-size: clamp(2.5em, 8vw, 5.5em);
    background: linear-gradient(135deg, #ff6fd8, #ffd700, #7b2ff7);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    filter: drop-shadow(0 0 20px rgba(255,111,216,0.6));
    line-height: 1.1;
  }

  .birthday-text {
    font-family: 'Dancing Script', cursive;
    font-size: clamp(1.8em, 5vw, 3.5em);
    color: #ffd700;
    filter: drop-shadow(0 0 15px rgba(255,215,0,0.7));
  }

  .name-text {
    font-family: 'Dancing Script', cursive;
    font-size: clamp(3em, 10vw, 7em);
    background: linear-gradient(135deg, #ff9fff, #ffd700, #ff6fd8);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    filter: drop-shadow(0 0 30px rgba(255,111,216,0.8));
    animation: nameGlow 3s ease-in-out infinite;
  }
  @keyframes nameGlow {
    0%,100% { filter:drop-shadow(0 0 30px rgba(255,111,216,0.8)); }
    50%      { filter:drop-shadow(0 0 60px rgba(255,215,0,1)); }
  }

  /* ===== AGE BADGE ===== */
  .age-badge {
    margin-top: 20px;
    width: 120px; height: 120px;
    background: linear-gradient(135deg, #ff6fd8, #7b2ff7);
    border-radius: 50%;
    display: flex; flex-direction: column;
    justify-content: center; align-items: center;
    box-shadow: 0 0 40px rgba(255,111,216,0.6), inset 0 0 20px rgba(255,255,255,0.1);
    animation: spin3d 8s linear infinite;
  }
  @keyframes spin3d { 0%{transform:rotateY(0deg)} 100%{transform:rotateY(360deg)} }
  .age-number { font-size: 3em; font-weight: 700; color: white; line-height: 1; }
  .age-label  { font-size: 0.7em; color: rgba(255,255,255,0.8); letter-spacing: 2px; }

  /* ===== CAKE ===== */
  .cake-section {
    margin: 40px 0;
    animation: fadeIn 1s ease 0.5s both;
  }
  @keyframes fadeIn { from{opacity:0;transform:scale(0.8)} to{opacity:1;transform:scale(1)} }

  .cake { font-size: 8em; text-align: center; animation: cakeBounce 2s ease-in-out infinite; }
  @keyframes cakeBounce { 0%,100%{transform:scale(1) rotate(-3deg)} 50%{transform:scale(1.1) rotate(3deg)} }

  /* ===== DATE RIBBON ===== */
  .date-ribbon {
    background: linear-gradient(135deg, #7b2ff7, #ff6fd8);
    color: white; font-weight: 600;
    padding: 10px 40px; border-radius: 50px;
    font-size: 1em; letter-spacing: 2px;
    box-shadow: 0 0 25px rgba(123,47,247,0.5);
    margin: 10px 0 30px;
    animation: fadeIn 1s ease 0.8s both;
  }

  /* ===== MESSAGE CARD ===== */
  .message-card {
    max-width: 700px; width: 100%;
    background: rgba(255,255,255,0.05);
    backdrop-filter: blur(20px);
    border: 1px solid rgba(255,255,255,0.15);
    border-radius: 25px;
    padding: 40px;
    text-align: center;
    margin: 20px 0;
    animation: fadeIn 1s ease 1s both;
    box-shadow: 0 0 40px rgba(123,47,247,0.2);
  }

  .message-card p {
    color: rgba(255,255,255,0.85);
    font-size: clamp(0.95em, 2vw, 1.1em);
    line-height: 1.9;
  }
  .message-card .highlight {
    color: #ff9fff;
    font-weight: 600;
    font-family: 'Dancing Script', cursive;
    font-size: 1.3em;
  }

  /* ===== WISH CARDS ===== */
  .wishes-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 20px; max-width: 750px; width: 100%;
    margin: 30px 0;
    animation: fadeIn 1s ease 1.2s both;
  }
  .wish-card {
    background: rgba(255,255,255,0.06);
    backdrop-filter: blur(15px);
    border: 1px solid rgba(255,255,255,0.12);
    border-radius: 20px;
    padding: 25px 20px;
    text-align: center;
    transition: transform 0.3s, box-shadow 0.3s;
    cursor: default;
  }
  .wish-card:hover { transform:translateY(-8px); box-shadow:0 20px 40px rgba(255,111,216,0.2); }
  .wish-icon { font-size: 2.5em; margin-bottom: 10px; }
  .wish-title { color: #ffd700; font-weight: 600; margin-bottom: 5px; font-size: 0.95em; }
  .wish-desc { color: rgba(255,255,255,0.6); font-size: 0.82em; line-height: 1.5; }

  /* ===== PHOTO FRAME (decorative) ===== */
  .photo-frame {
    width: 180px; height: 180px;
    border-radius: 50%;
    background: linear-gradient(135deg, #ff6fd8, #7b2ff7, #ffd700);
    padding: 4px;
    margin: 20px 0;
    box-shadow: 0 0 50px rgba(255,111,216,0.5);
    animation: rotateBorder 6s linear infinite;
  }
  @keyframes rotateBorder { 0%{filter:hue-rotate(0deg)} 100%{filter:hue-rotate(360deg)} }
  .photo-inner {
    width: 100%; height: 100%;
    border-radius: 50%;
    background: linear-gradient(135deg, #1a0030, #2d0050);
    display: flex; justify-content: center; align-items: center;
    font-size: 5em;
  }

  /* ===== MUSIC CONTROL ===== */
  .music-ctrl {
    position: fixed; bottom: 30px; right: 30px; z-index: 100;
    width: 60px; height: 60px;
    background: linear-gradient(135deg, #ff6fd8, #7b2ff7);
    border-radius: 50%; border: none;
    cursor: pointer; font-size: 1.5em;
    box-shadow: 0 0 25px rgba(255,111,216,0.6);
    transition: transform 0.3s;
    display: flex; align-items: center; justify-content: center;
  }
  .music-ctrl:hover { transform: scale(1.1); }
  .music-ctrl.playing { animation: musicPulse 1s ease-in-out infinite; }
  @keyframes musicPulse { 0%,100%{box-shadow:0 0 25px rgba(255,111,216,0.6)} 50%{box-shadow:0 0 50px rgba(255,111,216,1)} }

  .music-label {
    position: fixed; bottom: 100px; right: 20px; z-index: 100;
    background: rgba(0,0,0,0.7); color: white;
    padding: 8px 15px; border-radius: 20px;
    font-size: 0.8em; text-align: center; max-width: 140px;
    backdrop-filter: blur(10px);
  }

  /* ===== FOOTER ===== */
  .footer-msg {
    font-family: 'Dancing Script', cursive;
    font-size: clamp(1.3em, 3vw, 1.8em);
    color: rgba(255,255,255,0.4);
    margin-top: 40px;
    text-align: center;
    animation: fadeIn 1s ease 1.5s both;
  }

  /* ===== FLOATING BALLOONS ===== */
  .balloon {
    position: fixed; bottom: -100px;
    font-size: 2.5em;
    animation: floatUp linear infinite;
    z-index: 2; pointer-events: none;
    filter: drop-shadow(0 0 10px rgba(255,111,216,0.4));
  }
  @keyframes floatUp {
    0%   { transform: translateY(0) rotate(-5deg); opacity: 0.9; }
    25%  { transform: translateY(-25vh) rotate(5deg); }
    50%  { transform: translateY(-50vh) rotate(-5deg); }
    75%  { transform: translateY(-75vh) rotate(5deg); }
    100% { transform: translateY(-110vh) rotate(-3deg); opacity: 0; }
  }

  /* ===== FLOATING FLOWERS ===== */
  .petal {
    position: fixed;
    font-size: 1.5em;
    animation: petalFall linear infinite;
    z-index: 2; pointer-events: none;
    top: -50px;
  }
  @keyframes petalFall {
    0%   { transform: translateY(0) rotate(0deg) translateX(0); opacity: 1; }
    50%  { transform: translateY(50vh) rotate(180deg) translateX(30px); }
    100% { transform: translateY(110vh) rotate(360deg) translateX(-20px); opacity: 0; }
  }

  /* ===== CONFETTI ===== */
  .confetti {
    position: fixed;
    width: 10px; height: 10px;
    border-radius: 2px;
    animation: confettiFall linear infinite;
    z-index: 2; pointer-events: none;
    top: -20px;
  }
  @keyframes confettiFall {
    0%   { transform: translateY(0) rotate(0deg); opacity: 1; }
    100% { transform: translateY(110vh) rotate(720deg); opacity: 0; }
  }

  /* ===== GLITTER STARS ===== */
  .glitter {
    position: fixed; width: 6px; height: 6px;
    border-radius: 50%;
    background: gold;
    animation: glitterFall linear infinite;
    z-index: 2; pointer-events: none;
    top: -10px;
  }
  @keyframes glitterFall {
    0%   { transform: translateY(0) scale(1); opacity: 1; }
    50%  { opacity: 0.5; transform: translateY(50vh) scale(0.5); }
    100% { transform: translateY(110vh) scale(0); opacity: 0; }
  }

  /* ===== CLICK HEARTS ===== */
  .click-heart {
    position: fixed; pointer-events: none; z-index: 999;
    font-size: 1.5em;
    animation: heartFly 1.5s ease forwards;
  }
  @keyframes heartFly {
    0%   { opacity:1; transform:translateY(0) scale(1); }
    100% { opacity:0; transform:translateY(-120px) scale(0.5); }
  }
</style>
</head>
<body>

<!-- INTRO SCREEN -->
<div id="intro">
  <div class="intro-emoji">ğŸ</div>
  <h1>Ada pesan untukmu, Lya...</h1>
  <p>Klik untuk membuka kejutan spesialmu ğŸ€</p>
  <button class="start-btn" onclick="startParty()">âœ¨ Buka Sekarang âœ¨</button>
</div>

<!-- MAIN PAGE -->
<div id="main">
  <canvas id="particleCanvas"></canvas>
  <div id="stars"></div>

  <div class="content">
    <div class="header-glow">
      <div class="happy-text">Happy</div>
      <div class="birthday-text">Birthday</div>
      <div class="name-text">Lya ğŸŒ¸</div>
    </div>

    <div class="age-badge">
      <div class="age-number">26</div>
      <div class="age-label">TAHUN</div>
    </div>

    <div class="date-ribbon">ğŸ“… 18 Februari 2025</div>

    <div class="photo-frame">
      <div class="photo-inner">ğŸ‘¸</div>
    </div>

    <div class="cake-section">
      <div class="cake">ğŸ‚</div>
    </div>

    <div class="message-card">
      <p>
        Di hari yang sangat istimewa ini,<br>
        tepat <span class="highlight">18 Februari</span>, hari di mana dunia menjadi lebih indah<br>
        karena kehadiranmu yang luar biasa. ğŸŒŸ<br><br>
        Kamu telah melewati <span class="highlight">26 tahun</span> perjalanan yang penuh warna,<br>
        penuh tawa, air mata, dan kenangan berharga.<br>
        Setiap langkahmu adalah cerita yang menakjubkan. ğŸ’«<br><br>
        Semoga di usiamu yang ke-26 ini, segala impianmu<br>
        satu per satu memelukmu menjadi kenyataan. ğŸ¦‹<br>
        Semoga kebahagiaanmu sepanjang hari ini<br>
        menjadi tanda kebahagiaan sepanjang tahunmu. âœ¨
      </p>
    </div>

    <div class="wishes-grid">
      <div class="wish-card">
        <div class="wish-icon">ğŸ’–</div>
        <div class="wish-title">Cinta & Kasih</div>
        <div class="wish-desc">Semoga hatimu selalu dipenuhi cinta yang tulus dan hangat</div>
      </div>
      <div class="wish-card">
        <div class="wish-icon">ğŸŒŸ</div>
        <div class="wish-title">Sukses Selalu</div>
        <div class="wish-desc">Setiap mimpimu menjadi nyata dan karirmu semakin bersinar</div>
      </div>
      <div class="wish-card">
        <div class="wish-icon">ğŸŒ¸</div>
        <div class="wish-title">Kesehatan</div>
        <div class="wish-desc">Sehat selalu, jiwa raga kuat, dan semangat tak pernah padam</div>
      </div>
      <div class="wish-card">
        <div class="wish-icon">ğŸ˜„</div>
        <div class="wish-title">Kebahagiaan</div>
        <div class="wish-desc">Setiap harimu selalu menyimpan alasan untuk tersenyum</div>
      </div>
      <div class="wish-card">
        <div class="wish-icon">ğŸ¦‹</div>
        <div class="wish-title">Kebebasan</div>
        <div class="wish-desc">Terbang tinggi meraih semua hal indah yang kamu impikan</div>
      </div>
      <div class="wish-card">
        <div class="wish-icon">ğŸ¯</div>
        <div class="wish-title">Tujuan Hidup</div>
        <div class="wish-desc">Setiap langkah semakin dekat ke versi terbaik dirimu</div>
      </div>
    </div>

    <div class="footer-msg">
      Selamat ulang tahun yang ke-26, Lya! ğŸ‰<br>
      Kamu luar biasa. Dunia beruntung punya kamu. ğŸ’œ
    </div>
  </div>

  <div class="music-label" id="musicLabel">ğŸµ Klik â™ª untuk musik</div>
  <button class="music-ctrl" id="musicBtn" onclick="toggleMusic()">ğŸµ</button>
</div>

<script>
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• ACOUSTIC MUSIC (Web Audio API) â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
let audioCtx = null, musicNodes = [], isPlaying = false, musicInterval = null;

function createAcousticMusic() {
  audioCtx = new (window.AudioContext || window.webkitAudioContext)();

  const masterGain = audioCtx.createGain();
  masterGain.gain.setValueAtTime(0.18, audioCtx.currentTime);

  // Reverb
  const convolver = audioCtx.createConvolver();
  const reverbLen = audioCtx.sampleRate * 3;
  const reverbBuf = audioCtx.createBuffer(2, reverbLen, audioCtx.sampleRate);
  for (let c = 0; c < 2; c++) {
    const d = reverbBuf.getChannelData(c);
    for (let i = 0; i < reverbLen; i++) d[i] = (Math.random()*2-1) * Math.pow(1 - i/reverbLen, 2);
  }
  convolver.buffer = reverbBuf;

  const reverbGain = audioCtx.createGain();
  reverbGain.gain.setValueAtTime(0.25, audioCtx.currentTime);

  masterGain.connect(audioCtx.destination);
  masterGain.connect(convolver);
  convolver.connect(reverbGain);
  reverbGain.connect(audioCtx.destination);

  musicNodes = [masterGain, convolver, reverbGain];

  // Happy Birthday melody notes (Hz) with timing (s)
  const melody = [
    // "Happy birth-day to you"
    [261.63,0.0,0.3], [261.63,0.35,0.15],
    [293.66,0.5,0.4], [261.63,1.0,0.4], [349.23,1.5,0.4], [329.63,2.1,0.7],
    // "Happy birth-day to you"
    [261.63,3.2,0.3], [261.63,3.55,0.15],
    [293.66,3.8,0.4], [261.63,4.3,0.4], [392.00,4.8,0.4], [349.23,5.3,0.7],
    // "Happy birth-day dear Lya"
    [261.63,6.4,0.3], [261.63,6.7,0.15],
    [523.25,6.95,0.4],[440.00,7.45,0.4],[349.23,7.95,0.4],[329.63,8.4,0.3],[293.66,8.75,0.6],
    // "Happy birth-day to you"
    [466.16,9.8,0.3], [466.16,10.1,0.15],
    [440.00,10.35,0.4],[349.23,10.85,0.4],[392.00,11.35,0.4],[349.23,11.85,1.0],
  ];

  // Chord accompaniment
  const chords = [
    [[261.63,329.63,392.00], 0.0, 2.0],
    [[246.94,311.13,392.00], 2.1, 2.0],
    [[261.63,329.63,392.00], 4.2, 2.0],
    [[174.61,261.63,349.23], 6.3, 2.0],
    [[261.63,329.63,392.00], 8.4, 2.0],
    [[246.94,311.13,392.00],10.5, 2.0],
    [[261.63,329.63,392.00],12.0, 1.0],
  ];

  return { melody, chords, masterGain, totalDuration: 14 };
}

function playNote(freq, startTime, duration, type='sine', volMult=1) {
  if (!audioCtx) return;
  const osc = audioCtx.createOscillator();
  const gainNode = audioCtx.createGain();

  osc.type = type;
  osc.frequency.setValueAtTime(freq, audioCtx.currentTime + startTime);

  gainNode.gain.setValueAtTime(0, audioCtx.currentTime + startTime);
  gainNode.gain.linearRampToValueAtTime(0.4 * volMult, audioCtx.currentTime + startTime + 0.02);
  gainNode.gain.exponentialRampToValueAtTime(0.001, audioCtx.currentTime + startTime + duration);

  osc.connect(gainNode);
  gainNode.connect(musicNodes[0]);

  osc.start(audioCtx.currentTime + startTime);
  osc.stop(audioCtx.currentTime + startTime + duration + 0.1);
}

function playAcoustic(melody, chords, totalDuration) {
  // Melody (guitar-like with harmonics)
  melody.forEach(([freq, t, dur]) => {
    playNote(freq,     t, dur, 'triangle', 0.7);
    playNote(freq*2,   t, dur*0.6, 'sine', 0.15);
    playNote(freq*0.5, t, dur*0.4, 'sine', 0.2);
  });

  // Chords (soft strummed)
  chords.forEach(([freqs, t, dur]) => {
    freqs.forEach((f, i) => {
      playNote(f, t + i*0.04, dur, 'sine', 0.12);
    });
  });

  // Bass pluck
  const bassNotes = [
    [130.81,0.0,0.5],[146.83,2.1,0.5],[130.81,4.2,0.5],
    [87.31,6.3,0.5],[130.81,8.4,0.5],[123.47,10.5,0.5],[130.81,12.0,0.5]
  ];
  bassNotes.forEach(([f,t,d]) => playNote(f, t, d, 'triangle', 0.5));
}

function startMusic() {
  if (!audioCtx) {
    const setup = createAcousticMusic();
    window._musicSetup = setup;
  }
  if (audioCtx.state === 'suspended') audioCtx.resume();

  const { melody, chords, totalDuration } = window._musicSetup;

  function loop() {
    playAcoustic(melody, chords, totalDuration);
    musicInterval = setTimeout(loop, totalDuration * 1000);
  }
  loop();
  isPlaying = true;
}

function stopMusic() {
  if (audioCtx) {
    audioCtx.suspend();
    clearTimeout(musicInterval);
  }
  isPlaying = false;
}

function toggleMusic() {
  const btn = document.getElementById('musicBtn');
  const lbl = document.getElementById('musicLabel');
  if (isPlaying) {
    stopMusic();
    btn.textContent = 'ğŸ”‡';
    btn.classList.remove('playing');
    lbl.textContent = 'ğŸµ Musik dimatikan';
  } else {
    startMusic();
    btn.textContent = 'ğŸµ';
    btn.classList.add('playing');
    lbl.textContent = 'ğŸµ Acoustic Guitar â™ª';
  }
  setTimeout(() => { lbl.style.opacity = '0'; }, 2000);
  lbl.style.opacity = '1';
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• STAR BACKGROUND â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function createStars() {
  const container = document.getElementById('stars');
  for (let i = 0; i < 150; i++) {
    const star = document.createElement('div');
    const size = Math.random() * 3 + 1;
    star.style.cssText = `
      position:fixed;
      width:${size}px; height:${size}px;
      background:white; border-radius:50%;
      left:${Math.random()*100}vw;
      top:${Math.random()*100}vh;
      opacity:${Math.random()*0.8+0.2};
      animation:twinkle ${Math.random()*4+2}s ease-in-out infinite;
      animation-delay:${Math.random()*4}s;
    `;
    container.appendChild(star);
  }
  const style = document.createElement('style');
  style.textContent = '@keyframes twinkle{0%,100%{opacity:0.2;transform:scale(1)}50%{opacity:1;transform:scale(1.5)}}';
  document.head.appendChild(style);
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• PARTICLE CANVAS â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const canvas = document.getElementById('particleCanvas');
const ctx = canvas.getContext('2d');
let particles = [];

function resizeCanvas() {
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
}

class Particle {
  constructor() { this.reset(); }
  reset() {
    this.x = Math.random() * canvas.width;
    this.y = canvas.height + 20;
    this.size = Math.random() * 4 + 1;
    this.speedY = -(Math.random() * 1.5 + 0.5);
    this.speedX = (Math.random() - 0.5) * 0.8;
    this.life = 1;
    this.decay = Math.random() * 0.005 + 0.003;
    const colors = ['#ff6fd8','#ffd700','#7b2ff7','#ff9fff','#fff','#a855f7'];
    this.color = colors[Math.floor(Math.random()*colors.length)];
    this.type = Math.random() > 0.5 ? 'circle' : 'star';
  }
  update() {
    this.x += this.speedX;
    this.y += this.speedY;
    this.life -= this.decay;
    if (this.life <= 0 || this.y < -20) this.reset();
  }
  draw() {
    ctx.save();
    ctx.globalAlpha = this.life;
    ctx.fillStyle = this.color;
    ctx.shadowBlur = 8;
    ctx.shadowColor = this.color;
    if (this.type === 'circle') {
      ctx.beginPath();
      ctx.arc(this.x, this.y, this.size, 0, Math.PI*2);
      ctx.fill();
    } else {
      ctx.translate(this.x, this.y);
      ctx.beginPath();
      for (let i = 0; i < 5; i++) {
        const angle = (i * 4 * Math.PI) / 5 - Math.PI/2;
        const r = i===0 ? this.size*2 : this.size;
        ctx.lineTo(Math.cos(angle)*r, Math.sin(angle)*r);
      }
      ctx.closePath(); ctx.fill();
    }
    ctx.restore();
  }
}

function initParticles() {
  for (let i = 0; i < 80; i++) {
    const p = new Particle();
    p.y = Math.random() * canvas.height;
    particles.push(p);
  }
}

function animateParticles() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  particles.forEach(p => { p.update(); p.draw(); });
  requestAnimationFrame(animateParticles);
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• BALLOONS â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const balloonEmojis = ['ğŸˆ','ğŸˆ','ğŸ‰','ğŸŠ','ğŸˆ','ğŸˆ'];
function spawnBalloon() {
  const b = document.createElement('div');
  b.className = 'balloon';
  b.textContent = balloonEmojis[Math.floor(Math.random()*balloonEmojis.length)];
  b.style.left = Math.random()*95 + 'vw';
  const dur = Math.random()*8 + 8;
  b.style.animation = `floatUp ${dur}s linear infinite`;
  b.style.animationDelay = Math.random()*6 + 's';
  b.style.fontSize = (Math.random()*1.5+1.5) + 'em';
  document.body.appendChild(b);
  setTimeout(() => b.remove(), (dur + 6) * 1000);
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• PETALS / FLOWERS â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const petalEmojis = ['ğŸŒ¸','ğŸŒº','ğŸŒ¼','ğŸŒ»','ğŸ’','ğŸŒ¹','ğŸª·'];
function spawnPetal() {
  const p = document.createElement('div');
  p.className = 'petal';
  p.textContent = petalEmojis[Math.floor(Math.random()*petalEmojis.length)];
  p.style.left = Math.random()*95 + 'vw';
  const dur = Math.random()*6 + 6;
  p.style.animation = `petalFall ${dur}s linear`;
  document.body.appendChild(p);
  setTimeout(() => p.remove(), dur*1000);
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• CONFETTI â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const confettiColors = ['#ff6fd8','#ffd700','#7b2ff7','#00e5ff','#ff4444','#44ff88'];
function spawnConfetti() {
  const c = document.createElement('div');
  c.className = 'confetti';
  c.style.background = confettiColors[Math.floor(Math.random()*confettiColors.length)];
  c.style.left = Math.random()*95 + 'vw';
  c.style.width = (Math.random()*8+5) + 'px';
  c.style.height = (Math.random()*8+5) + 'px';
  c.style.borderRadius = Math.random()>0.5 ? '50%' : '0';
  const dur = Math.random()*5+5;
  c.style.animation = `confettiFall ${dur}s linear`;
  document.body.appendChild(c);
  setTimeout(() => c.remove(), dur*1000);
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• CLICK HEARTS â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const heartEmojis = ['ğŸ’œ','ğŸ’–','ğŸ’•','âœ¨','ğŸŒ¸','â­','ğŸ’«'];
document.addEventListener('click', function(e) {
  if (e.target.closest('#intro') || e.target.closest('.music-ctrl')) return;
  for (let i = 0; i < 3; i++) {
    const h = document.createElement('div');
    h.className = 'click-heart';
    h.textContent = heartEmojis[Math.floor(Math.random()*heartEmojis.length)];
    h.style.left = (e.clientX + (Math.random()-0.5)*40) + 'px';
    h.style.top  = (e.clientY + (Math.random()-0.5)*40) + 'px';
    document.body.appendChild(h);
    setTimeout(() => h.remove(), 1500);
  }
});

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• SPAWN LOOPS â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function startFloatingElements() {
  // Balloons
  for (let i = 0; i < 5; i++) setTimeout(spawnBalloon, i * 800);
  setInterval(spawnBalloon, 2000);
  // Petals
  for (let i = 0; i < 6; i++) setTimeout(spawnPetal, i * 600);
  setInterval(spawnPetal, 1200);
  // Confetti burst
  for (let i = 0; i < 20; i++) setTimeout(spawnConfetti, i * 100);
  setInterval(spawnConfetti, 400);
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• INTRO â†’ MAIN â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function startParty() {
  const intro = document.getElementById('intro');
  intro.classList.add('hide');
  setTimeout(() => {
    intro.style.display = 'none';
    const main = document.getElementById('main');
    main.style.display = 'block';

    resizeCanvas();
    createStars();
    initParticles();
    animateParticles();
    startFloatingElements();

    // Auto-start music
    startMusic();
    document.getElementById('musicBtn').classList.add('playing');
    document.getElementById('musicLabel').textContent = 'ğŸµ Acoustic Guitar â™ª';
    setTimeout(() => {
      document.getElementById('musicLabel').style.opacity = '0';
    }, 3000);

  }, 1000);
}

window.addEventListener('resize', resizeCanvas);
</script>
</body>
</html>